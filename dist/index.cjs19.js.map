{"version":3,"file":"index.cjs19.js","sources":["../src/elements/Image/Image.tsx"],"sourcesContent":["/* eslint-disable complexity */\nimport React, { useRef, useState } from \"react\";\nimport { cn } from \"@/lib/utils\"; // Assuming cn utility is available (e.g., from shadcn/ui)\nimport MaximizeIcon from \"@/assets/icons/maximize.svg?react\";\nimport TimesIcon from \"@/assets/icons/times.svg?react\";\n\ninterface ImageProps extends React.HTMLAttributes<HTMLDivElement> {\n\t/**\n\t * The source URL of the image.\n\t */\n\tsrc: string;\n\t/**\n\t * The alternative text for the image.\n\t */\n\talt: string;\n\t/**\n\t * Optional caption text displayed below the image.\n\t */\n\tcaption?: string;\n\t/**\n\t * Optional URL for the image, making it a link.\n\t */\n\thref?: string;\n\t/**\n\t * Optional copyright text displayed below the image (and caption, if present).\n\t */\n\tcopyright?: string;\n\t/**\n\t * Optional title text displayed within the overlay.\n\t */\n\toverlayTitle?: string;\n\t/**\n\t * Optional copyright text displayed within the overlay.\n\t */\n\toverlayCopyright?: string;\n\t/**\n\t * Optional URL for the overlay title, making it a link.\n\t */\n\toverlayLink?: string;\n\t/**\n\t * Controls the vertical alignment of content within the overlay.\n\t * 'center' (default): Content starts from the top.\n\t * 'bottom': Content is aligned to the bottom of the overlay.\n\t */\n\toverlayPosition?: \"center\" | \"bottom\";\n\t/**\n\t * If true, applies a darkening filter to the image, useful when overlay text needs more contrast.\n\t */\n\tdarkenImage?: boolean;\n\t/**\n\t * Optional additional class names for the `img` element itself.\n\t */\n\timgClassName?: string;\n\t/**\n\t * Optional add the zoom/enlarge icon to onClick open the image full screen\n\t */\n\twithZoomBox?: boolean;\n}\n\ntype OpenImage = {\n\tsrc: string;\n\tcaption?: string;\n\talt: string;\n\theight: number;\n\twidth: number;\n};\n\n// Internal helper component for rendering the overlay to reduce complexity\nconst ImageOverlay: React.FC<{\n\ttitle?: string;\n\tcopyrightText?: string;\n\tlink?: string;\n\tposition: \"center\" | \"bottom\";\n}> = ({ title, copyrightText, link, position }) => {\n\t// Don't render the overlay div if there's no content for it\n\tif (!title && !copyrightText) {\n\t\treturn null;\n\t}\n\n\tconst TitleElement = link ? \"a\" : \"span\";\n\tconst titleLinkProps = link ? { href: link, \"data-mainlink\": \"true\" } : {};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t\"absolute inset-0 flex flex-col p-6 text-white [text-shadow:1px_1px_4px_rgba(0,0,0,0.4)]\",\n\t\t\t\tposition === \"bottom\" ? \"justify-end\" : \"justify-start\", // Content alignment\n\t\t\t)}\n\t\t>\n\t\t\t{/* Overlay Title */}\n\t\t\t{title && (\n\t\t\t\t<TitleElement\n\t\t\t\t\tclassName=\"text-lg leading-tight font-bold hover:underline lg:text-2xl\" // Corresponds to 'title' within overlay\n\t\t\t\t\t{...titleLinkProps}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</TitleElement>\n\t\t\t)}\n\n\t\t\t{/* Overlay Copyright - Position adjusts based on overlayPosition */}\n\t\t\t{copyrightText && (\n\t\t\t\t<p\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"absolute text-xs text-white/40\", // Corresponds to 'image__copyright' within overlay\n\t\t\t\t\t\tposition === \"bottom\" ? \"top-1 right-2\" : \"right-2 bottom-1\", // Position depends on main content alignment\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{copyrightText}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\n/**\n * A component for displaying images with optional overlays, captions, and copyright information,\n * styled using Tailwind CSS, following a structure similar to the provided example.\n */\nconst Image = React.forwardRef<HTMLDivElement, ImageProps>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tsrc,\n\t\t\talt,\n\t\t\tcaption,\n\t\t\tcopyright,\n\t\t\toverlayTitle,\n\t\t\toverlayCopyright,\n\t\t\toverlayLink,\n\t\t\toverlayPosition = \"center\",\n\t\t\tdarkenImage = false,\n\t\t\timgClassName,\n\t\t\twithZoomBox,\n\t\t\t...props\n\t\t},\n\t\tref,\n\t) => {\n\t\tconst imgRef = useRef<HTMLImageElement | null>(null);\n\t\tconst [openImage, setOpenImage] = useState<OpenImage | null>(null);\n\t\tconst isPortrait = (img?: { width?: number; height?: number }) =>\n\t\t\t(img?.height ?? 0) >= (img?.width ?? 0);\n\t\tconst open = () =>\n\t\t\tsetOpenImage({\n\t\t\t\tsrc,\n\t\t\t\talt,\n\t\t\t\tcaption,\n\t\t\t\twidth: imgRef?.current?.clientWidth ?? 0,\n\t\t\t\theight: imgRef?.current?.clientHeight ?? 0,\n\t\t\t});\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\"relative mb-3 block\", className)} // Corresponds to 'image'\n\t\t\t\t\tref={ref}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{/* Image container */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t(caption || copyright) && \"mb-1\", // Only add mb-1 if caption or copyright exists\n\t\t\t\t\t\t\tdarkenImage && \"brightness-60 filter\",\n\t\t\t\t\t\t\t(props.href || withZoomBox) && \"cursor-pointer\",\n\t\t\t\t\t\t\t\"relative\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tref={imgRef}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tif (props.href) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\twindow.open(props.href, \"_blank\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (withZoomBox) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\topen();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\talt={alt}\n\t\t\t\t\t\t\tclassName={cn(\"block h-auto w-full\", imgClassName)} // Basic image styling\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{withZoomBox && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute right-1.5 bottom-1.5 flex items-center justify-center bg-white p-1.5\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MaximizeIcon className=\"size-6 text-white\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Render Overlay using the helper component */}\n\t\t\t\t\t<ImageOverlay\n\t\t\t\t\t\ttitle={overlayTitle}\n\t\t\t\t\t\tcopyrightText={overlayCopyright}\n\t\t\t\t\t\tlink={overlayLink}\n\t\t\t\t\t\tposition={overlayPosition}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Optional Caption */}\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<p className=\"mb-1 block px-4 text-sm leading-tight font-normal break-words text-black lg:px-0\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t{/* Corresponds to 'image__caption' */}\n\t\t\t\t\t\t\t{caption}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Optional Copyright (below image) */}\n\t\t\t\t\t{copyright && (\n\t\t\t\t\t\t<p className=\"mb-1 block px-4 text-[11px] leading-tight break-words text-gray-600 lg:px-0\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t{/* Corresponds to 'image__copyright' below image */}\n\t\t\t\t\t\t\t{copyright}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{/* Optional FullScreen */}\n\t\t\t\t{openImage?.src && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"overlay\"\n\t\t\t\t\t\tclassName=\"fixed inset-0 z-[10000] flex items-center justify-center bg-black/80\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif ((e.target as HTMLElement).id === \"overlay\") {\n\t\t\t\t\t\t\t\tsetOpenImage(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"relative inline-block h-fit w-fit\"\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* Close Button */}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute top-0 right-0 z-10 cursor-pointer bg-white p-2\"\n\t\t\t\t\t\t\t\tonClick={() => setOpenImage(null)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TimesIcon className=\"size-6\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Image Container */}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex items-center justify-center bg-white\",\n\t\t\t\t\t\t\t\t\tisPortrait(openImage)\n\t\t\t\t\t\t\t\t\t\t? \"h-[min(980px,80vh)] w-auto max-w-[min(980px,90vw)] lg:max-w-[min(980px,90vh)]\"\n\t\t\t\t\t\t\t\t\t\t: \"h-auto max-h-[min(980px,90vh)] w-[min(980px,95vw)] lg:w-[min(980px,90vh)]\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={openImage.src}\n\t\t\t\t\t\t\t\t\talt={openImage.alt || \"\"}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"object-contain select-none\",\n\t\t\t\t\t\t\t\t\t\tisPortrait(openImage) ? \"h-full w-auto\" : \"h-auto w-full\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Caption */}\n\t\t\t\t\t\t\t{openImage.caption && (\n\t\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 z-10 w-full translate-y-[100%] bg-white px-1 py-0.5 text-xs lg:w-auto lg:translate-y-0 lg:px-2 lg:py-1 lg:text-base\">\n\t\t\t\t\t\t\t\t\t{openImage.caption}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</>\n\t\t);\n\t},\n);\n\nImage.displayName = \"Image\";\n\nexport { Image as Image };\n"],"names":["ImageOverlay","title","copyrightText","link","position","TitleElement","titleLinkProps","jsxs","cn","jsx","Image","React","className","src","alt","caption","copyright","overlayTitle","overlayCopyright","overlayLink","overlayPosition","darkenImage","imgClassName","withZoomBox","props","ref","imgRef","useRef","openImage","setOpenImage","useState","isPortrait","img","open","Fragment","e","MaximizeIcon","TimesIcon"],"mappings":"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"}