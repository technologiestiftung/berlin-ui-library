{"version":3,"file":"index.es19.js","sources":["../src/elements/Image/Image.tsx"],"sourcesContent":["/* eslint-disable complexity */\nimport React, { useRef, useState } from \"react\";\nimport { cn } from \"@/lib/utils\"; // Assuming cn utility is available (e.g., from shadcn/ui)\nimport MaximizeIcon from \"@/assets/icons/maximize.svg?react\";\nimport TimesIcon from \"@/assets/icons/times.svg?react\";\n\ninterface ImageProps extends React.HTMLAttributes<HTMLDivElement> {\n\t/**\n\t * The source URL of the image.\n\t */\n\tsrc: string;\n\t/**\n\t * The alternative text for the image.\n\t */\n\talt: string;\n\t/**\n\t * Optional caption text displayed below the image.\n\t */\n\tcaption?: string;\n\t/**\n\t * Optional URL for the image, making it a link.\n\t */\n\thref?: string;\n\t/**\n\t * Optional copyright text displayed below the image (and caption, if present).\n\t */\n\tcopyright?: string;\n\t/**\n\t * Optional title text displayed within the overlay.\n\t */\n\toverlayTitle?: string;\n\t/**\n\t * Optional copyright text displayed within the overlay.\n\t */\n\toverlayCopyright?: string;\n\t/**\n\t * Optional URL for the overlay title, making it a link.\n\t */\n\toverlayLink?: string;\n\t/**\n\t * Controls the vertical alignment of content within the overlay.\n\t * 'center' (default): Content starts from the top.\n\t * 'bottom': Content is aligned to the bottom of the overlay.\n\t */\n\toverlayPosition?: \"center\" | \"bottom\";\n\t/**\n\t * If true, applies a darkening filter to the image, useful when overlay text needs more contrast.\n\t */\n\tdarkenImage?: boolean;\n\t/**\n\t * Optional additional class names for the `img` element itself.\n\t */\n\timgClassName?: string;\n\t/**\n\t * Optional add the zoom/enlarge icon to onClick open the image full screen\n\t */\n\twithZoomBox?: boolean;\n}\n\ntype OpenImage = {\n\tsrc: string;\n\tcaption?: string;\n\talt: string;\n\theight: number;\n\twidth: number;\n};\n\n// Internal helper component for rendering the overlay to reduce complexity\nconst ImageOverlay: React.FC<{\n\ttitle?: string;\n\tcopyrightText?: string;\n\tlink?: string;\n\tposition: \"center\" | \"bottom\";\n}> = ({ title, copyrightText, link, position }) => {\n\t// Don't render the overlay div if there's no content for it\n\tif (!title && !copyrightText) {\n\t\treturn null;\n\t}\n\n\tconst TitleElement = link ? \"a\" : \"span\";\n\tconst titleLinkProps = link ? { href: link, \"data-mainlink\": \"true\" } : {};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t\"absolute inset-0 flex flex-col p-6 text-white [text-shadow:1px_1px_4px_rgba(0,0,0,0.4)]\",\n\t\t\t\tposition === \"bottom\" ? \"justify-end\" : \"justify-start\", // Content alignment\n\t\t\t)}\n\t\t>\n\t\t\t{/* Overlay Title */}\n\t\t\t{title && (\n\t\t\t\t<TitleElement\n\t\t\t\t\tclassName=\"text-lg leading-tight font-bold hover:underline lg:text-2xl\" // Corresponds to 'title' within overlay\n\t\t\t\t\t{...titleLinkProps}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</TitleElement>\n\t\t\t)}\n\n\t\t\t{/* Overlay Copyright - Position adjusts based on overlayPosition */}\n\t\t\t{copyrightText && (\n\t\t\t\t<p\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"absolute text-xs text-white/40\", // Corresponds to 'image__copyright' within overlay\n\t\t\t\t\t\tposition === \"bottom\" ? \"top-1 right-2\" : \"right-2 bottom-1\", // Position depends on main content alignment\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{copyrightText}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\n/**\n * A component for displaying images with optional overlays, captions, and copyright information,\n * styled using Tailwind CSS, following a structure similar to the provided example.\n */\nconst Image = React.forwardRef<HTMLDivElement, ImageProps>(\n\t(\n\t\t{\n\t\t\tclassName,\n\t\t\tsrc,\n\t\t\talt,\n\t\t\tcaption,\n\t\t\tcopyright,\n\t\t\toverlayTitle,\n\t\t\toverlayCopyright,\n\t\t\toverlayLink,\n\t\t\toverlayPosition = \"center\",\n\t\t\tdarkenImage = false,\n\t\t\timgClassName,\n\t\t\twithZoomBox,\n\t\t\t...props\n\t\t},\n\t\tref,\n\t) => {\n\t\tconst imgRef = useRef<HTMLImageElement | null>(null);\n\t\tconst [openImage, setOpenImage] = useState<OpenImage | null>(null);\n\t\tconst isPortrait = (img?: { width?: number; height?: number }) =>\n\t\t\t(img?.height ?? 0) >= (img?.width ?? 0);\n\t\tconst open = () =>\n\t\t\tsetOpenImage({\n\t\t\t\tsrc,\n\t\t\t\talt,\n\t\t\t\tcaption,\n\t\t\t\twidth: imgRef?.current?.clientWidth ?? 0,\n\t\t\t\theight: imgRef?.current?.clientHeight ?? 0,\n\t\t\t});\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName={cn(\"relative mb-3 block\", className)} // Corresponds to 'image'\n\t\t\t\t\tref={ref}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t{/* Image container */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t(caption || copyright) && \"mb-1\", // Only add mb-1 if caption or copyright exists\n\t\t\t\t\t\t\tdarkenImage && \"brightness-60 filter\",\n\t\t\t\t\t\t\t(props.href || withZoomBox) && \"cursor-pointer\",\n\t\t\t\t\t\t\t\"relative\",\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tref={imgRef}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tif (props.href) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\twindow.open(props.href, \"_blank\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (withZoomBox) {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\topen();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\talt={alt}\n\t\t\t\t\t\t\tclassName={cn(\"block h-auto w-full\", imgClassName)} // Basic image styling\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{withZoomBox && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute right-1.5 bottom-1.5 flex items-center justify-center bg-white p-1.5\"\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MaximizeIcon className=\"size-6 text-white\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Render Overlay using the helper component */}\n\t\t\t\t\t<ImageOverlay\n\t\t\t\t\t\ttitle={overlayTitle}\n\t\t\t\t\t\tcopyrightText={overlayCopyright}\n\t\t\t\t\t\tlink={overlayLink}\n\t\t\t\t\t\tposition={overlayPosition}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Optional Caption */}\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<p className=\"mb-1 block px-4 text-sm leading-tight font-normal break-words text-black lg:px-0\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t{/* Corresponds to 'image__caption' */}\n\t\t\t\t\t\t\t{caption}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Optional Copyright (below image) */}\n\t\t\t\t\t{copyright && (\n\t\t\t\t\t\t<p className=\"mb-1 block px-4 text-[11px] leading-tight break-words text-gray-600 lg:px-0\">\n\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t{/* Corresponds to 'image__copyright' below image */}\n\t\t\t\t\t\t\t{copyright}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{/* Optional FullScreen */}\n\t\t\t\t{openImage?.src && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"overlay\"\n\t\t\t\t\t\tclassName=\"fixed inset-0 z-[10000] flex items-center justify-center bg-black/80\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif ((e.target as HTMLElement).id === \"overlay\") {\n\t\t\t\t\t\t\t\tsetOpenImage(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"relative inline-block h-fit w-fit\"\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* Close Button */}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute top-0 right-0 z-10 cursor-pointer bg-white p-2\"\n\t\t\t\t\t\t\t\tonClick={() => setOpenImage(null)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TimesIcon className=\"size-6\" />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Image Container */}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\"relative flex items-center justify-center bg-white\",\n\t\t\t\t\t\t\t\t\tisPortrait(openImage)\n\t\t\t\t\t\t\t\t\t\t? \"h-[min(980px,90vh)] w-auto max-w-[min(980px,90vh)]\"\n\t\t\t\t\t\t\t\t\t\t: \"h-auto max-h-[min(980px,90vh)] w-[min(980px,90vh)]\",\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={openImage.src}\n\t\t\t\t\t\t\t\t\talt={openImage.alt || \"\"}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\"object-contain select-none\",\n\t\t\t\t\t\t\t\t\t\tisPortrait(openImage) ? \"h-full w-auto\" : \"h-auto w-full\",\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Caption */}\n\t\t\t\t\t\t\t{openImage.caption && (\n\t\t\t\t\t\t\t\t<div className=\"absolute bottom-0 left-0 z-10 bg-white px-2 py-1\">\n\t\t\t\t\t\t\t\t\t{openImage.caption}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</>\n\t\t);\n\t},\n);\n\nImage.displayName = \"Image\";\n\nexport { Image as Image };\n"],"names":["ImageOverlay","title","copyrightText","link","position","TitleElement","titleLinkProps","jsxs","cn","jsx","Image","React","className","src","alt","caption","copyright","overlayTitle","overlayCopyright","overlayLink","overlayPosition","darkenImage","imgClassName","withZoomBox","props","ref","imgRef","useRef","openImage","setOpenImage","useState","isPortrait","img","open","Fragment","e","MaximizeIcon","TimesIcon"],"mappings":"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"}