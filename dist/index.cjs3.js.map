{"version":3,"file":"index.cjs3.js","sources":["../src/elements/Header/Header.tsx"],"sourcesContent":["\"use server\";\n/* eslint-disable complexity */\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { LogoBar } from \"./LogoBar\";\nimport { MainHeaderContent } from \"./MainHeaderContent\";\nimport { SubHeaderBar } from \"./SubHeaderBar\";\nimport { BreadcrumbItem, LinkComponentProps, MenuItem } from \"./types\";\nimport { Language } from \"./LanguageProvider\";\nimport { LanguageProvider } from \"./LanguageProvider\";\n\nexport interface HeaderProps extends LinkComponentProps {\n\t/**\n\t * Header title text\n\t */\n\theader?: string;\n\t/**\n\t * Header subtitle text\n\t */\n\tcaption?: string;\n\t/**\n\t * URL for the header link\n\t */\n\turl?: string;\n\t/**\n\t * URL for the logo link\n\t */\n\tlogoUrl?: string;\n\t/**\n\t * Custom logo component (will be used instead of default Berlin logo if provided)\n\t */\n\tlogoComponent?: React.ReactNode;\n\t/**\n\t * Breadcrumb items to display\n\t */\n\tbreadcrumbs?: BreadcrumbItem[];\n\t/**\n\t * Whether to show the breadcrumbs section\n\t */\n\tshowBreadcrumbs?: boolean;\n\t/**\n\t * Whether to show the language selector\n\t */\n\tshowLanguageSelect?: boolean;\n\t/**\n\t * Current language code\n\t */\n\tlanguage?: string;\n\t/**\n\t * Available languages\n\t */\n\tlanguages?: Language[];\n\t/**\n\t * JSON translation files keyed by language code\n\t */\n\ttranslations?: Record<string, Record<string, string>>;\n\t/**\n\t * Callback when language changes\n\t */\n\tonLanguageChange?: (code: string) => void;\n\t/**\n\t * Whether to show the search button\n\t */\n\tshowSearchButton?: boolean;\n\t/**\n\t * Callback when search button is clicked\n\t */\n\tonSearch?: () => void;\n\t/**\n\t * Whether to show the menu button\n\t */\n\tshowMenuButton?: boolean;\n\t/**\n\t * Menu items for the main menu\n\t */\n\tmenuItems?: MenuItem[];\n\t/**\n\t * Callback when menu button is clicked\n\t */\n\tonOpenMenu?: () => void;\n\t/**\n\t * Additional CSS classes\n\t */\n\tclassName?: string;\n}\n\n/**\n * Header component with integrated accessibility menu\n *\n * The Header component includes:\n * - Logo section\n * - Title and action buttons (search, menu, accessibility)\n * - Optional breadcrumbs and language selector\n * - Built-in accessibility menu drawer\n */\nexport function Header({\n\theader = \"Design System\",\n\tcaption = \"Berlin.de\",\n\turl = \"/\",\n\tlogoUrl = \"https://www.berlin.de\",\n\tlogoComponent,\n\tLinkComponent,\n\tbreadcrumbs = [],\n\tshowBreadcrumbs = true,\n\tshowLanguageSelect = true,\n\tlanguage = \"de\",\n\tlanguages = [\n\t\t{ code: \"de\", label: \"Deutsch\" },\n\t\t{ code: \"en\", label: \"English\" },\n\t],\n\ttranslations,\n\tonLanguageChange = () => {},\n\tshowSearchButton = true,\n\tonSearch = () => {},\n\tshowMenuButton = true,\n\tmenuItems = [],\n\tonOpenMenu = () => {},\n\tclassName = \"\",\n}: HeaderProps) {\n\tconst [isSticky, setIsSticky] = useState(false);\n\tconst headerRef = useRef<HTMLElement>(null);\n\n\tuseEffect(() => {\n\t\tconst headerElement = headerRef.current;\n\n\t\tif (headerElement) {\n\t\t\t// Add a small buffer to prevent flickering\n\t\t\tlet timeoutId: ReturnType<typeof setTimeout> | null = null;\n\t\t\tconst DEBOUNCE_TIME = 50; // Short debounce to avoid flickering\n\t\t\tlet currentIsSticky = false; // Track current state to prevent unnecessary updates\n\n\t\t\tconst handleScroll = () => {\n\t\t\t\tconst scrollY = window.scrollY || window.pageYOffset;\n\t\t\t\t// Use a small positive threshold when scrolling down, and a zero threshold when scrolling up\n\t\t\t\t// This hysteresis prevents flickering at the boundary\n\t\t\t\tconst scrollThreshold = currentIsSticky ? 0 : 2;\n\n\t\t\t\tconst newIsSticky = scrollY > scrollThreshold;\n\n\t\t\t\t// Only update if state actually changed\n\t\t\t\tif (newIsSticky !== currentIsSticky) {\n\t\t\t\t\tcurrentIsSticky = newIsSticky;\n\n\t\t\t\t\t// Clear any pending timeout\n\t\t\t\t\tif (timeoutId) {\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set timeout to debounce rapid changes\n\t\t\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\t\t\tsetIsSticky(newIsSticky);\n\t\t\t\t\t}, DEBOUNCE_TIME);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Initial check\n\t\t\thandleScroll();\n\n\t\t\t// Add scroll event listener\n\t\t\twindow.addEventListener(\"scroll\", handleScroll, { passive: true });\n\n\t\t\t// Cleanup function\n\t\t\treturn () => {\n\t\t\t\tif (timeoutId) {\n\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t}\n\t\t\t\twindow.removeEventListener(\"scroll\", handleScroll);\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}, []);\n\n\treturn (\n\t\t<LanguageProvider\n\t\t\tinitialLanguage={language}\n\t\t\tlanguages={languages}\n\t\t\ttranslations={translations}\n\t\t\tonLanguageChange={onLanguageChange}\n\t\t>\n\t\t\t<header\n\t\t\t\tref={headerRef}\n\t\t\t\tclassName={`sticky top-0 z-20 box-border leading-[1.22rem] ${className}`}\n\t\t\t>\n\t\t\t\t{/* Logo Bar */}\n\t\t\t\t<LogoBar\n\t\t\t\t\tlogoUrl={logoUrl}\n\t\t\t\t\tlogoComponent={logoComponent}\n\t\t\t\t\tisSticky={isSticky}\n\t\t\t\t/>\n\n\t\t\t\t{/* Main Header Content */}\n\t\t\t\t<MainHeaderContent\n\t\t\t\t\theader={header}\n\t\t\t\t\tcaption={caption}\n\t\t\t\t\turl={url}\n\t\t\t\t\tshowSearchButton={showSearchButton}\n\t\t\t\t\tonSearch={onSearch}\n\t\t\t\t\tshowMenuButton={showMenuButton}\n\t\t\t\t\tmenuItems={menuItems}\n\t\t\t\t\tonOpenMenu={onOpenMenu}\n\t\t\t\t/>\n\n\t\t\t\t{/* Sub Header Bar */}\n\t\t\t\t{!isSticky && (\n\t\t\t\t\t<SubHeaderBar\n\t\t\t\t\t\tshowBreadcrumbs={showBreadcrumbs}\n\t\t\t\t\t\tbreadcrumbs={breadcrumbs}\n\t\t\t\t\t\tshowLanguageSelect={showLanguageSelect}\n\t\t\t\t\t\tLinkComponent={LinkComponent}\n\t\t\t\t\t\tisSticky={isSticky}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</header>\n\t\t</LanguageProvider>\n\t);\n}\n"],"names":["Header","header","caption","url","logoUrl","logoComponent","LinkComponent","breadcrumbs","showBreadcrumbs","showLanguageSelect","language","languages","translations","onLanguageChange","showSearchButton","onSearch","showMenuButton","menuItems","onOpenMenu","className","isSticky","setIsSticky","useState","headerRef","useRef","useEffect","timeoutId","DEBOUNCE_TIME","currentIsSticky","handleScroll","newIsSticky","jsx","LanguageProvider","jsxs","LogoBar","MainHeaderContent","SubHeaderBar"],"mappings":"6PA8FO,SAASA,EAAO,CACtB,OAAAC,EAAS,gBACT,QAAAC,EAAU,YACV,IAAAC,EAAM,IACN,QAAAC,EAAU,wBACV,cAAAC,EACA,cAAAC,EACA,YAAAC,EAAc,CAAA,EACd,gBAAAC,EAAkB,GAClB,mBAAAC,EAAqB,GACrB,SAAAC,EAAW,KACX,UAAAC,EAAY,CACX,CAAE,KAAM,KAAM,MAAO,SAAA,EACrB,CAAE,KAAM,KAAM,MAAO,SAAA,CAAU,EAEhC,aAAAC,EACA,iBAAAC,EAAmB,IAAM,CAAC,EAC1B,iBAAAC,EAAmB,GACnB,SAAAC,EAAW,IAAM,CAAC,EAClB,eAAAC,EAAiB,GACjB,UAAAC,EAAY,CAAA,EACZ,WAAAC,EAAa,IAAM,CAAC,EACpB,UAAAC,EAAY,EACb,EAAgB,CACf,KAAM,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAS,EAAK,EACxCC,EAAYC,EAAAA,OAAoB,IAAI,EAE1CC,OAAAA,EAAAA,UAAU,IAAM,CAGf,GAFsBF,EAAU,QAEb,CAElB,IAAIG,EAAkD,KACtD,MAAMC,EAAgB,GACtB,IAAIC,EAAkB,GAEtB,MAAMC,EAAe,IAAM,CAM1B,MAAMC,GALU,OAAO,SAAW,OAAO,cAGjBF,EAAkB,EAAI,GAK1CE,IAAgBF,IACnBA,EAAkBE,EAGdJ,GACH,aAAaA,CAAS,EAIvBA,EAAY,WAAW,IAAM,CAC5BL,EAAYS,CAAW,CACxB,EAAGH,CAAa,EAElB,EAGA,OAAAE,EAAA,EAGA,OAAO,iBAAiB,SAAUA,EAAc,CAAE,QAAS,GAAM,EAG1D,IAAM,CACRH,GACH,aAAaA,CAAS,EAEvB,OAAO,oBAAoB,SAAUG,CAAY,CAClD,CACD,CAGD,EAAG,CAAA,CAAE,EAGJE,EAAAA,kBAAAA,IAACC,EAAAA,iBAAA,CACA,gBAAiBtB,EACjB,UAAAC,EACA,aAAAC,EACA,iBAAAC,EAEA,SAAAoB,EAAAA,kBAAAA,KAAC,SAAA,CACA,IAAKV,EACL,UAAW,kDAAkDJ,CAAS,GAGtE,SAAA,CAAAY,EAAAA,kBAAAA,IAACG,EAAAA,QAAA,CACA,QAAA9B,EACA,cAAAC,EACA,SAAAe,CAAA,CAAA,EAIDW,EAAAA,kBAAAA,IAACI,EAAAA,kBAAA,CACA,OAAAlC,EACA,QAAAC,EACA,IAAAC,EACA,iBAAAW,EACA,SAAAC,EACA,eAAAC,EACA,UAAAC,EACA,WAAAC,CAAA,CAAA,EAIA,CAACE,GACDW,EAAAA,kBAAAA,IAACK,EAAAA,aAAA,CACA,gBAAA5B,EACA,YAAAD,EACA,mBAAAE,EACA,cAAAH,EACA,SAAAc,CAAA,CAAA,CACD,CAAA,CAAA,CAEF,CAAA,CAGH"}