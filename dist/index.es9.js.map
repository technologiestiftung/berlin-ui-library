{"version":3,"file":"index.es9.js","sources":["../src/components/Form.tsx"],"sourcesContent":["\"use client\";\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n\tController,\n\tFormProvider,\n\tuseFormContext,\n\ttype ControllerProps,\n\ttype FieldPath,\n\ttype FieldValues,\n} from \"react-hook-form\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"./Label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n\tname: TName;\n\trequired: boolean;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n\t{} as FormFieldContextValue,\n);\n\nconst FormField = <\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>(\n\tprops: ControllerProps<TFieldValues, TName>,\n) => {\n\tconst { name, rules, ...rest } = props;\n\tconst isRequired = Boolean(rules?.required);\n\treturn (\n\t\t<FormFieldContext.Provider value={{ name, required: isRequired }}>\n\t\t\t<Controller {...{ name, rules, ...rest }} />\n\t\t</FormFieldContext.Provider>\n\t);\n};\n\nconst useFormField = () => {\n\tconst fieldContext = React.useContext(FormFieldContext);\n\tconst itemContext = React.useContext(FormItemContext);\n\tconst { getFieldState, formState } = useFormContext();\n\n\tconst fieldState = getFieldState(fieldContext.name, formState);\n\n\tif (!fieldContext) {\n\t\tthrow new Error(\"useFormField should be used within <FormField>\");\n\t}\n\n\tconst { id } = itemContext;\n\n\treturn {\n\t\tid,\n\t\tname: fieldContext.name,\n\t\trequired: fieldContext.required,\n\t\tformItemId: `${id}-form-item`,\n\t\tformDescriptionId: `${id}-form-item-description`,\n\t\tformMessageId: `${id}-form-item-message`,\n\t\t...fieldState,\n\t};\n};\n\ntype FormItemContextValue = {\n\tid: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n\t{} as FormItemContextValue,\n);\n\nconst formItemVariants = cva(\"space-y-2\", {\n\tvariants: {\n\t\tlayout: {\n\t\t\tvertical: \"flex flex-col space-y-2 bg-white\",\n\t\t\thorizontal: \"flex items-center space-x-4\",\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tlayout: \"vertical\",\n\t},\n});\n\nconst FormItem = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement> & VariantProps<typeof formItemVariants>\n>(({ className, layout, ...props }, ref) => {\n\tconst id = React.useId();\n\n\treturn (\n\t\t<FormItemContext.Provider value={{ id }}>\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn(formItemVariants({ layout, className }))}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</FormItemContext.Provider>\n\t);\n});\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formItemId, required } = useFormField();\n\n\treturn (\n\t\t<Label\n\t\t\tref={ref}\n\t\t\tclassName={cn(error && \"font-bold text-destructive\", className)}\n\t\t\thtmlFor={formItemId}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t\t{required && <span className=\"ml-1 text-destructive\">*</span>}\n\t\t</Label>\n\t);\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<\n\tReact.ElementRef<typeof Slot>,\n\tReact.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n\tconst { error, formItemId, formDescriptionId, formMessageId } =\n\t\tuseFormField();\n\n\treturn (\n\t\t<Slot\n\t\t\tref={ref}\n\t\t\tid={formItemId}\n\t\t\tclassName=\"border-2 border-black bg-white p-2\"\n\t\t\taria-describedby={\n\t\t\t\t!error\n\t\t\t\t\t? `${formDescriptionId}`\n\t\t\t\t\t: `${formDescriptionId} ${formMessageId}`\n\t\t\t}\n\t\t\taria-invalid={!!error}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n\tconst { formDescriptionId } = useFormField();\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formDescriptionId}\n\t\t\tclassName={cn(\"text-sm text-muted-foreground\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formMessageId } = useFormField();\n\tconst body = error ? String(error?.message ?? \"\") : children;\n\n\tif (!body) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formMessageId}\n\t\t\tclassName={cn(\"text-sm font-medium text-destructive\", className)}\n\t\t\t{...props}\n\t\t>\n\t\t\t{body}\n\t\t</p>\n\t);\n});\nFormMessage.displayName = \"FormMessage\";\n\nexport {\n\tuseFormField,\n\tForm,\n\tFormItem,\n\tFormLabel,\n\tFormControl,\n\tFormDescription,\n\tFormMessage,\n\tFormField,\n};\n"],"names":["Form","FormProvider","FormFieldContext","React","FormField","props","name","rules","rest","isRequired","Controller","useFormField","fieldContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","id","formItemVariants","cva","FormItem","className","layout","ref","cn","FormLabel","children","error","formItemId","required","Label","FormControl","formDescriptionId","formMessageId","Slot","FormDescription","FormMessage","body"],"mappings":"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"}