{"version":3,"file":"Form.client.cjs","sources":["../../../src/components/Form/Form.client.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n\tController,\n\tFormProvider,\n\tuseFormContext,\n\ttype ControllerProps,\n\ttype FieldPath,\n\ttype FieldValues,\n} from \"react-hook-form\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"../Label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n\tname: TName;\n\trequired: boolean;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n\t{} as FormFieldContextValue,\n);\n\nconst FormField = <\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>(\n\tprops: ControllerProps<TFieldValues, TName>,\n) => {\n\tconst { name, rules, ...rest } = props;\n\tconst isRequired = Boolean(rules?.required);\n\treturn (\n\t\t<FormFieldContext.Provider value={{ name, required: isRequired }}>\n\t\t\t<Controller {...{ name, rules, ...rest }} />\n\t\t</FormFieldContext.Provider>\n\t);\n};\n\nconst useFormField = () => {\n\tconst fieldContext = React.useContext(FormFieldContext);\n\tconst itemContext = React.useContext(FormItemContext);\n\tconst { getFieldState, formState } = useFormContext();\n\n\tconst fieldState = getFieldState(fieldContext.name, formState);\n\n\tif (!fieldContext) {\n\t\tthrow new Error(\"useFormField should be used within <FormField>\");\n\t}\n\n\tconst { id } = itemContext;\n\n\treturn {\n\t\tid,\n\t\tname: fieldContext.name,\n\t\trequired: fieldContext.required,\n\t\tformItemId: `${id}-form-item`,\n\t\tformDescriptionId: `${id}-form-item-description`,\n\t\tformMessageId: `${id}-form-item-message`,\n\t\t...fieldState,\n\t};\n};\n\ntype FormItemContextValue = {\n\tid: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n\t{} as FormItemContextValue,\n);\n\nconst formItemVariants = cva(\"space-y-1\", {\n\tvariants: {\n\t\tlayout: {\n\t\t\tvertical: \"flex flex-col space-y-1\",\n\t\t\thorizontal: \"flex items-center space-x-4\",\n\t\t},\n\t\tbackground: {\n\t\t\twhite: \"bg-white\",\n\t\t\tgray: \"bg-block-colored\",\n\t\t\ttransparent: \"bg-transparent\",\n\t\t\tnone: \"\",\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tlayout: \"vertical\",\n\t\tbackground: \"none\",\n\t},\n});\n\nconst FormItem = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement> & VariantProps<typeof formItemVariants>\n>(({ className, layout, background, ...props }, ref) => {\n\tconst id = React.useId();\n\n\treturn (\n\t\t<FormItemContext.Provider value={{ id }}>\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn(formItemVariants({ layout, background, className }))}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</FormItemContext.Provider>\n\t);\n});\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formItemId, required } = useFormField();\n\n\treturn (\n\t\t<Label\n\t\t\tref={ref}\n\t\t\tclassName={cn(error && \"text-destructive font-bold\", className)}\n\t\t\thtmlFor={formItemId}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t\t{required && <span className=\"text-destructive ml-1\">*</span>}\n\t\t</Label>\n\t);\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<\n\tReact.ElementRef<typeof Slot>,\n\tReact.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n\tconst { error, formItemId, formDescriptionId, formMessageId } =\n\t\tuseFormField();\n\n\treturn (\n\t\t<Slot\n\t\t\tref={ref}\n\t\t\tid={formItemId}\n\t\t\tclassName=\"p-2\"\n\t\t\taria-describedby={\n\t\t\t\t!error\n\t\t\t\t\t? `${formDescriptionId}`\n\t\t\t\t\t: `${formDescriptionId} ${formMessageId}`\n\t\t\t}\n\t\t\taria-invalid={!!error}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n\tconst { formDescriptionId } = useFormField();\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formDescriptionId}\n\t\t\tclassName={cn(\"text-sm text-text-lightest\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formMessageId } = useFormField();\n\tconst body = error ? String(error?.message ?? \"\") : children;\n\n\tif (!body) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formMessageId}\n\t\t\tclassName={cn(\"text-destructive text-sm font-medium\", className)}\n\t\t\t{...props}\n\t\t>\n\t\t\t{body}\n\t\t</p>\n\t);\n});\nFormMessage.displayName = \"FormMessage\";\n\nexport {\n\tuseFormField,\n\tForm,\n\tFormItem,\n\tFormLabel,\n\tFormControl,\n\tFormDescription,\n\tFormMessage,\n\tFormField,\n};\n"],"names":["Form","FormProvider","FormFieldContext","React","FormField","props","name","rules","rest","isRequired","jsx","Controller","useFormField","fieldContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","id","formItemVariants","cva","FormItem","className","layout","background","ref","cn","FormLabel","children","error","formItemId","required","jsxs","Label","FormControl","formDescriptionId","formMessageId","Slot","FormDescription","FormMessage","body"],"mappings":"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"}