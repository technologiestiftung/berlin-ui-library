{"version":3,"file":"index.es10.js","sources":["../src/components/Form.tsx"],"sourcesContent":["\"use client\";\nimport * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport {\n\tController,\n\tFormProvider,\n\tuseFormContext,\n\ttype ControllerProps,\n\ttype FieldPath,\n\ttype FieldValues,\n} from \"react-hook-form\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"./Label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n\tname: TName;\n\trequired: boolean;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n\t{} as FormFieldContextValue,\n);\n\nconst FormField = <\n\tTFieldValues extends FieldValues = FieldValues,\n\tTName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>(\n\tprops: ControllerProps<TFieldValues, TName>,\n) => {\n\tconst { name, rules, ...rest } = props;\n\tconst isRequired = Boolean(rules?.required);\n\treturn (\n\t\t<FormFieldContext.Provider value={{ name, required: isRequired }}>\n\t\t\t<Controller {...{ name, rules, ...rest }} />\n\t\t</FormFieldContext.Provider>\n\t);\n};\n\nconst useFormField = () => {\n\tconst fieldContext = React.useContext(FormFieldContext);\n\tconst itemContext = React.useContext(FormItemContext);\n\tconst { getFieldState, formState } = useFormContext();\n\n\tconst fieldState = getFieldState(fieldContext.name, formState);\n\n\tif (!fieldContext) {\n\t\tthrow new Error(\"useFormField should be used within <FormField>\");\n\t}\n\n\tconst { id } = itemContext;\n\n\treturn {\n\t\tid,\n\t\tname: fieldContext.name,\n\t\trequired: fieldContext.required,\n\t\tformItemId: `${id}-form-item`,\n\t\tformDescriptionId: `${id}-form-item-description`,\n\t\tformMessageId: `${id}-form-item-message`,\n\t\t...fieldState,\n\t};\n};\n\ntype FormItemContextValue = {\n\tid: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n\t{} as FormItemContextValue,\n);\n\nconst formItemVariants = cva(\"space-y-2\", {\n\tvariants: {\n\t\tlayout: {\n\t\t\tvertical: \"flex flex-col space-y-2 bg-white\",\n\t\t\thorizontal: \"flex items-center space-x-4\",\n\t\t},\n\t},\n\tdefaultVariants: {\n\t\tlayout: \"vertical\",\n\t},\n});\n\nconst FormItem = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement> & VariantProps<typeof formItemVariants>\n>(({ className, layout, ...props }, ref) => {\n\tconst id = React.useId();\n\n\treturn (\n\t\t<FormItemContext.Provider value={{ id }}>\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn(formItemVariants({ layout, className }))}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t</FormItemContext.Provider>\n\t);\n});\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formItemId, required } = useFormField();\n\n\treturn (\n\t\t<Label\n\t\t\tref={ref}\n\t\t\tclassName={cn(error && \"font-bold text-destructive\", className)}\n\t\t\thtmlFor={formItemId}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t\t{required && <span className=\"ml-1 text-destructive\">*</span>}\n\t\t</Label>\n\t);\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<\n\tReact.ElementRef<typeof Slot>,\n\tReact.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n\tconst { error, formItemId, formDescriptionId, formMessageId } =\n\t\tuseFormField();\n\n\treturn (\n\t\t<Slot\n\t\t\tref={ref}\n\t\t\tid={formItemId}\n\t\t\tclassName=\"border-2 border-black bg-white p-2\"\n\t\t\taria-describedby={\n\t\t\t\t!error\n\t\t\t\t\t? `${formDescriptionId}`\n\t\t\t\t\t: `${formDescriptionId} ${formMessageId}`\n\t\t\t}\n\t\t\taria-invalid={!!error}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n\tconst { formDescriptionId } = useFormField();\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formDescriptionId}\n\t\t\tclassName={cn(\"text-sm text-muted-foreground\", className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n});\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<\n\tHTMLParagraphElement,\n\tReact.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n\tconst { error, formMessageId } = useFormField();\n\tconst body = error ? String(error?.message ?? \"\") : children;\n\n\tif (!body) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<p\n\t\t\tref={ref}\n\t\t\tid={formMessageId}\n\t\t\tclassName={cn(\"text-sm font-medium text-destructive\", className)}\n\t\t\t{...props}\n\t\t>\n\t\t\t{body}\n\t\t</p>\n\t);\n});\nFormMessage.displayName = \"FormMessage\";\n\nexport {\n\tuseFormField,\n\tForm,\n\tFormItem,\n\tFormLabel,\n\tFormControl,\n\tFormDescription,\n\tFormMessage,\n\tFormField,\n};\n"],"names":["Form","FormProvider","FormFieldContext","React","FormField","props","name","rules","rest","isRequired","jsx","Controller","useFormField","fieldContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","id","formItemVariants","cva","FormItem","className","layout","ref","cn","FormLabel","children","error","formItemId","required","jsxs","Label","FormControl","formDescriptionId","formMessageId","Slot","FormDescription","FormMessage","body"],"mappings":"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"}